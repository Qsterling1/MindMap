<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resume ‚Äî Accordion</title>
<style>
  :root{
    --gold:#d4af37;
    --ink:#111;
    --muted:#6b7280;
    --green:#10b981;
    --green-dark:#059669;
    --neon-pink:#ff3cac;
    --neon-blue:#4acfff;
    --neon-purple:#7b5bff;
    --panel-bg:#111827;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{margin:0}
  body{background:#fff;color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;position:relative}
  .wrap{max-width:1024px;margin:24px auto;padding:0 18px;margin-top:140px}

  /* PROGRESS BAR - HORIZONTAL TOP */
  .progress-top{
    position:fixed;top:0;left:0;right:0;height:60px;background:#fff;
    box-shadow:0 2px 10px rgba(0,0,0,0.1);z-index:1000;display:flex;align-items:center;
    padding:0 20px;gap:15px;
  }
  .progress-top-label{font-weight:700;font-size:14px;white-space:nowrap;color:#6fc3ff;letter-spacing:.4px;text-transform:uppercase}
  .progress-top-bar{flex:1;height:28px;background:#e5e7eb;border-radius:999px;overflow:hidden;position:relative}
  .progress-top-fill{height:100%;background:linear-gradient(90deg, var(--neon-purple), var(--neon-blue));
    transition:width .5s ease, background .8s ease;position:relative}
  .progress-top-fill.complete{background:linear-gradient(90deg, var(--gold), #f6d979);
    animation:goldPulse 2s ease infinite}
  @keyframes goldPulse{0%,100%{opacity:1} 50%{opacity:.85}}
  @keyframes neonCycle{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  @keyframes emojiShake{0%,100%{transform:translate(0,0) rotate(0deg)}20%{transform:translate(2px,-1px) rotate(-4deg)}40%{transform:translate(-2px,1px) rotate(4deg)}60%{transform:translate(2px,-1px) rotate(-3deg)}80%{transform:translate(-1px,1px) rotate(3deg)}}
  .progress-top-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
    font-weight:700;font-size:13px;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3);z-index:2}
  .progress-top-xp{font-weight:700;font-size:14px;color:var(--gold);white-space:nowrap}

  /* XP BAR - VERTICAL LEFT */
  .progress-left{
    position:fixed;left:18px;top:100px;width:58px;height:410px;background:rgba(7,10,20,.92);
    border-radius:20px;box-shadow:0 18px 35px rgba(0,0,0,.45);z-index:940;
    padding:14px 10px;display:flex;flex-direction:column;align-items:center;border:1px solid rgba(74,207,255,.2)
  }
  .progress-left-icon{font-size:24px;margin-bottom:8px;color:var(--neon-blue)}
  .progress-left-bar{flex:1;width:34px;background:rgba(23,31,51,.9);border-radius:999px;
    position:relative;display:flex;flex-direction:column-reverse;overflow:hidden;border:1px solid rgba(74,207,255,.2)}
  .progress-left-fill{width:100%;background:linear-gradient(180deg, var(--neon-blue), var(--neon-pink));
    transition:height .5s ease;animation:neonCycle 8s ease infinite}
  .progress-left-percent{margin-top:8px;font-weight:700;font-size:11px;color:var(--neon-blue);letter-spacing:.4px;text-transform:uppercase}

  /* ACHIEVEMENT TRACKER SIDEBAR */
  .achievement-panel{
    position:fixed;right:32px;top:80px;width:360px;height:calc(100vh - 120px);background:rgba(7,10,20,.92);
    border-radius:24px;padding:18px;box-shadow:0 18px 40px rgba(0,0,0,.55);z-index:950;
    overflow:hidden;transition:transform .3s ease;display:flex;flex-direction:column;gap:16px
  }
  .achievement-panel::before{
    content:"";position:absolute;inset:0;border-radius:24px;border:2px solid transparent;
    background:linear-gradient(120deg,var(--neon-blue),var(--neon-purple),var(--neon-pink)) border-box;
    background-size:260% 260%;animation:neonCycle 10s ease infinite;
    -webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);
    -webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none
  }
  .achievement-panel > *{position:relative}
  .achievement-panel.collapsed{transform:translateX(calc(100% - 56px))}
  .achievement-header{
    padding:16px 20px;border-radius:18px;background:rgba(10,12,25,.92);
    color:var(--neon-blue);font-weight:800;font-size:15px;display:flex;justify-content:space-between;
    align-items:center;cursor:pointer;user-select:none;letter-spacing:.6px;box-shadow:0 10px 22px rgba(74,207,255,.32)
  }
  .achievement-header span:first-child{display:flex;align-items:center;gap:8px}
  .achievement-toggle{font-size:18px;transition:transform .3s ease;color:var(--neon-pink)}
  .achievement-panel.collapsed .achievement-toggle{transform:rotate(180deg)}
  .achievement-body{flex:1;overflow-y:auto;padding:4px 6px 6px}
  .achievement-body::-webkit-scrollbar{width:6px}
  .achievement-body::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--neon-blue),var(--neon-pink));border-radius:999px}
  .achievement-body{scrollbar-width:thin;scrollbar-color:var(--neon-blue) transparent}
  .achievement-counter{font-weight:700;margin-bottom:12px;color:var(--neon-pink);font-size:15px;text-transform:uppercase;letter-spacing:.8px}
  #achievementList{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
  .achievement-item{
    display:flex;align-items:flex-start;gap:12px;padding:12px;background:rgba(18,24,38,.9);
    border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.35);transition:transform .3s ease, box-shadow .3s ease;
    border:1px solid rgba(74,207,255,.12)
  }
  .achievement-item.unlocked{background:rgba(33,42,68,.95);box-shadow:0 10px 24px rgba(123,91,255,.35);transform:translateY(-2px)}
  .achievement-item.locked{opacity:.65}
  .achievement-icon{font-size:20px;line-height:1}
  .achievement-item.unlocked .achievement-icon{animation:emojiShake 1.8s ease-in-out infinite}
  .achievement-info{flex:1}
  .achievement-name{font-weight:600;font-size:13px;color:#e5e7ff}
  .achievement-hint{font-size:11px;color:#8aa4ff;font-style:italic;margin-top:4px}
  .achievement-xp{font-size:11px;color:var(--neon-pink);font-weight:700}
  /* FLOATING XP NOTIFICATIONS */
  .xp-float{
    position:fixed;font-weight:800;font-size:20px;color:var(--gold);
    pointer-events:none;z-index:9999;text-shadow:0 2px 4px rgba(0,0,0,.3);
    animation:floatUp 1.5s ease forwards}
  @keyframes floatUp{
    0%{opacity:1;transform:translateY(0) scale(1)}
    100%{opacity:0;transform:translateY(-100px) scale(1.3)}}

  /* SPARKLE EFFECT */
  .sparkle{
    position:absolute;width:4px;height:4px;background:var(--gold);border-radius:50%;
    pointer-events:none;animation:sparkleAnim .8s ease forwards}
  @keyframes sparkleAnim{
    0%{opacity:1;transform:translate(0,0) scale(1)}
    100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0)}}

  /* START SCREEN */
  .start-screen{
    position:fixed;inset:0;background:#07080f;
    z-index:10001;display:flex;align-items:center;justify-content:center;
    animation:fadeIn .5s ease;overflow:hidden
  }
  .start-screen::before{
    content:"";position:absolute;inset:28px;border-radius:32px;border:3px solid transparent;
    background:linear-gradient(120deg,var(--neon-blue),var(--neon-purple),var(--neon-pink)) border-box;
    background-size:300% 300%;animation:neonCycle 8s ease infinite;
    -webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);
    -webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none
  }
  .start-screen.hidden{display:none}
  .start-content{
    position:relative;text-align:center;padding:48px 56px;background:rgba(7,10,20,.9);
    border-radius:24px;display:flex;flex-direction:column;align-items:center;gap:24px;
    box-shadow:0 30px 60px rgba(0,0,0,.45);
  }
  .start-title{
    font-size:52px;font-weight:800;color:var(--gold);
    text-shadow:0 0 30px rgba(212,175,55,.7);
    letter-spacing:2px;animation:goldPulse 2s ease infinite
  }
  .start-subtitle{
    font-size:20px;color:#cad2ff;font-weight:400;letter-spacing:1px
  }
  .play-button{margin-bottom:4px}
  .start-actions{display:flex;gap:18px;flex-wrap:wrap;justify-content:center}
  .start-secondary-btn{padding:12px 20px;border-radius:999px;font-weight:700;border:2px solid var(--neon-blue);
    color:var(--neon-blue);background:transparent;cursor:pointer;transition:all .3s ease;min-width:170px;
    text-transform:uppercase;letter-spacing:.6px}
  .start-secondary-btn:hover{background:var(--neon-blue);color:#02121f;box-shadow:0 10px 24px rgba(74,207,255,.45);transform:translateY(-3px)}
  .start-encouragement{margin-top:4px;font-size:15px;color:#9ce5ff;letter-spacing:.6px;text-transform:uppercase}

  .completion-dock{position:fixed;right:26px;bottom:26px;background:rgba(7,10,20,.92);border-radius:18px;box-shadow:0 18px 35px rgba(0,0,0,.55);padding:20px 22px;max-width:280px;display:none;flex-direction:column;gap:14px;z-index:960;border:1px solid rgba(74,207,255,.25)}
  .completion-dock.show{display:flex;animation:fadeIn .4s ease}
  .completion-dock-title{font-weight:800;font-size:16px;color:var(--neon-blue);text-transform:uppercase;letter-spacing:.6px}
  .completion-dock-actions{display:flex;flex-direction:column;gap:8px}
  .completion-dock button,.completion-dock a{padding:10px 14px;border-radius:999px;font-weight:600;text-align:center;text-decoration:none;border:2px solid var(--neon-blue);color:var(--neon-blue);background:transparent;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px}
  .completion-dock button:hover,.completion-dock a:hover{background:var(--neon-blue);color:#02121f;transform:translateY(-2px);box-shadow:0 10px 22px rgba(74,207,255,.35)}
  body.dark-mode .completion-dock{background:rgba(7,10,20,.92);color:#e5e7eb}
  body.dark-mode .completion-dock button,body.dark-mode .completion-dock a{color:var(--neon-blue);border-color:var(--neon-blue)}
  body.dark-mode .completion-dock button:hover,body.dark-mode .completion-dock a:hover{background:var(--neon-blue);color:#02121f}

  .xp-burst{position:fixed;pointer-events:none;z-index:1100;opacity:0;animation:xpBurst .9s ease forwards}
  .xp-burst > span{display:block;font-weight:800;color:var(--neon-pink);text-shadow:0 2px 6px rgba(0,0,0,.45);font-size:18px;transform-origin:center}
  @keyframes xpBurst{0%{opacity:0;transform:scale(.6)}40%{opacity:1;transform:scale(1.05)}100%{opacity:0;transform:scale(1.4) translateY(-40px)}}
  .play-button{
    padding:20px 60px;font-size:24px;font-weight:800;background:var(--gold);
    color:#000;border:3px solid var(--gold);border-radius:12px;cursor:pointer;
    transition:all .3s ease;text-transform:uppercase;letter-spacing:2px;
    box-shadow:0 8px 20px rgba(212,175,55,.4)}
  .play-button:hover{
    background:#000;color:var(--gold);transform:scale(1.05);
    box-shadow:0 12px 30px rgba(212,175,55,.6)}

  /* COMPLETION MODAL */
  .completion-modal{position:fixed;inset:0;background:rgba(7,10,20,.86);z-index:15000;display:none;align-items:center;justify-content:center;padding:20px;animation:fadeIn .5s ease}
  .completion-modal.show{display:flex}
  .completion-content{
    background:rgba(7,10,20,.95);border-radius:28px;max-width:680px;width:100%;max-height:90vh;overflow-y:auto;
    padding:48px 56px;position:relative;border:3px solid transparent;box-shadow:0 30px 80px rgba(0,0,0,.6)
  }
  .completion-content::before{content:"";position:absolute;inset:0;border-radius:28px;border:3px solid transparent;
    background:linear-gradient(120deg,var(--neon-blue),var(--neon-purple),var(--neon-pink)) border-box;
    background-size:260% 260%;animation:neonCycle 10s ease infinite;
    -webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);
    -webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
  .completion-content > *{position:relative}
  .completion-title{font-size:34px;font-weight:800;text-align:center;color:#fef6ff;margin-bottom:28px;letter-spacing:1.2px;text-transform:uppercase;text-shadow:0 0 25px rgba(123,91,255,.55)}
  .completion-stats{background:rgba(12,16,30,.9);padding:24px;border-radius:18px;margin-bottom:30px;border:1px solid rgba(74,207,255,.18);display:grid;gap:14px}
  .stat-row{display:flex;justify-content:space-between;align-items:center;padding:4px 0}
  .stat-label{font-weight:600;display:flex;align-items:center;gap:8px;color:#9ca7ff;letter-spacing:.4px;text-transform:uppercase;font-size:13px}
  .stat-value{font-weight:800;color:#fef6ff;font-size:16px}
  .completion-message{text-align:center;font-size:15px;line-height:1.7;margin-bottom:28px;padding:18px;border-radius:16px;background:rgba(123,91,255,.12);color:#d5d8ff;border:1px solid rgba(123,91,255,.35)}
  .completion-divider{height:2px;background:linear-gradient(90deg,transparent,var(--neon-purple),var(--neon-pink),transparent);margin:32px 0}
  .completion-section-title{font-size:18px;font-weight:800;color:#a7b4ff;text-transform:uppercase;letter-spacing:.6px;margin-bottom:12px}
  .completion-primary{display:flex;flex-direction:column;gap:14px;margin-bottom:16px}
  .completion-secondary{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:12px}
  .completion-footer{margin-top:24px;display:flex;flex-direction:column;gap:12px}
  .completion-footer-actions{display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
  .cta-btn{padding:14px 20px;border-radius:999px;font-weight:700;text-decoration:none;transition:all .3s ease;border:2px solid transparent;font-size:14px;cursor:pointer;display:inline-flex;align-items:center;gap:10px;text-transform:uppercase;letter-spacing:.6px;justify-content:center}
  .cta-btn-primary{background:linear-gradient(120deg,var(--neon-pink),var(--neon-purple));color:#05060f;border:none;box-shadow:0 16px 32px rgba(255,60,172,.35)}
  .cta-btn-primary:hover{filter:brightness(1.08);transform:translateY(-3px)}
  .cta-btn-secondary{background:transparent;color:var(--neon-blue);border:2px solid var(--neon-blue);box-shadow:0 12px 24px rgba(74,207,255,.25)}
  .cta-btn-secondary:hover{background:var(--neon-blue);color:#02121f;transform:translateY(-3px)}
  .cta-btn-ghost{background:transparent;color:#f5f5f5;border:2px solid rgba(255,255,255,.25)}
  .cta-btn-ghost:hover{border-color:rgba(74,207,255,.6);color:var(--neon-blue);transform:translateY(-2px)}
  .next-levels{background:rgba(11,15,28,.92);padding:24px;border-radius:18px;border:1px solid rgba(74,207,255,.18);display:flex;flex-direction:column;gap:12px}
  .level-item{display:flex;align-items:center;gap:16px;padding:14px;background:rgba(18,24,38,.85);border-radius:14px;border:1px solid rgba(74,207,255,.12)}
  .level-item.locked{opacity:.85}
  .level-number{width:42px;height:42px;border-radius:50%;background:linear-gradient(140deg,var(--neon-blue),var(--neon-purple));color:#05060f;font-weight:800;display:flex;align-items:center;justify-content:center;font-size:16px}
  .level-info{flex:1}
  .level-name{font-weight:700;font-size:14px;color:#e5e7ff;text-transform:uppercase;letter-spacing:.6px}
  .level-desc{font-size:12px;color:#94a3ff}
  /* SETTINGS BUTTON & PANEL */
  .settings-button{
    position:fixed;bottom:20px;right:20px;width:50px;height:50px;border-radius:50%;
    background:var(--gold);border:none;cursor:pointer;display:flex;align-items:center;
    justify-content:center;font-size:24px;box-shadow:0 4px 12px rgba(0,0,0,.2);
    z-index:998;transition:all .3s ease}
  .settings-button:hover{transform:scale(1.1) rotate(90deg);box-shadow:0 6px 20px rgba(212,175,55,.4)}
  .settings-panel{
    position:fixed;bottom:80px;right:20px;background:#fff;border-radius:12px;
    padding:20px;box-shadow:0 8px 30px rgba(0,0,0,.2);z-index:13000;min-width:200px;
    display:none}
  .settings-panel.show{display:block;animation:fadeIn .3s ease}
  .setting-item{display:flex;justify-content:space-between;align-items:center;padding:10px 0;
    border-bottom:1px solid #e5e7eb}
  .setting-item:last-child{border-bottom:none}
  .setting-label{font-weight:600;font-size:14px}
  .toggle-switch{
    width:50px;height:26px;background:#ccc;border-radius:13px;position:relative;
    cursor:pointer;transition:background .3s ease}
  .toggle-switch.on{background:var(--gold)}
  .toggle-slider{
    width:22px;height:22px;background:#fff;border-radius:50%;position:absolute;
    top:2px;left:2px;transition:left .3s ease;box-shadow:0 2px 4px rgba(0,0,0,.2)}
  .toggle-switch.on .toggle-slider{left:26px}

  /* LEADERBOARD BUTTON */
  .leaderboard-button{
    position:fixed;bottom:20px;right:80px;width:50px;height:50px;border-radius:50%;
    background:var(--gold);border:none;cursor:pointer;display:flex;align-items:center;
    justify-content:center;font-size:24px;box-shadow:0 4px 12px rgba(0,0,0,.2);
    z-index:998;transition:all .3s ease}
  .leaderboard-button:hover{transform:scale(1.1);box-shadow:0 6px 20px rgba(212,175,55,.4)}

  /* LEADERBOARD MODAL */
  .leaderboard-modal{
    position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:14000;
    display:none;align-items:center;justify-content:center;padding:20px}
  .leaderboard-modal.show{display:flex;animation:fadeIn .3s ease}
  .leaderboard-content{
    position:relative;background:rgba(7,10,20,.94);border-radius:24px;max-width:520px;width:100%;max-height:80vh;
    overflow-y:auto;padding:36px 40px;border:2px solid transparent;box-shadow:0 20px 50px rgba(0,0,0,.55)}
  .leaderboard-content::before{content:"";position:absolute;inset:0;border-radius:24px;border:2px solid transparent;
    background:linear-gradient(120deg,var(--neon-blue),var(--neon-purple),var(--neon-pink)) border-box;
    background-size:250% 250%;animation:neonCycle 10s ease infinite;
    -webkit-mask:linear-gradient(#fff 0 0) padding-box,linear-gradient(#fff 0 0);
    -webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
  .leaderboard-content > *{position:relative}
  .leaderboard-title{
    font-size:24px;font-weight:800;text-align:center;color:var(--gold);
    margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:10px}
  .leaderboard-cta{margin-bottom:16px;text-align:center;font-size:13px;color:var(--muted);font-weight:600;letter-spacing:.4px}
  body.dark-mode .leaderboard-cta{color:#9ca3af}
  .leaderboard-list{list-style:none;margin:0;padding:0} // TEXT NOTE: leaderboard copy & layout
  .leaderboard-item{
    display:flex;justify-content:space-between;align-items:center;padding:14px 16px;margin-bottom:10px;
    background:rgba(12,16,30,.9);border-radius:14px;border:1px solid rgba(74,207,255,.16);box-shadow:0 12px 24px rgba(0,0,0,.35)}
  .leaderboard-item.current{border-color:var(--neon-pink);background:rgba(45,32,72,.9)}
  .leaderboard-rank{font-weight:800;font-size:18px;color:var(--neon-pink);width:48px}
  .leaderboard-name{flex:1;font-weight:600;color:#f5f7ff}
  .leaderboard-score{font-weight:800;color:var(--neon-blue)}

  .leaderboard-details{flex:1;display:flex;flex-direction:column;gap:4px}
  .leaderboard-meta{font-size:11px;color:var(--muted)}
  .leaderboard-entry{background:#f9fafb;padding:16px;border-radius:8px;border:1px solid #e5e7eb;margin:20px 0}
  .leaderboard-entry-controls{display:flex;gap:10px;flex-wrap:wrap}
  .leaderboard-entry input{flex:1;min-width:180px;padding:10px;border:2px solid #e5e7eb;border-radius:6px;font-size:14px}
  .leaderboard-feedback{margin-top:10px;font-size:12px;color:var(--muted)}
  .leaderboard-feedback.success{color:var(--green)}
  .leaderboard-feedback.error{color:#b91c1c}
  body.dark-mode .leaderboard-entry{background:#2a2a2a;border-color:#3a3a3a}
  body.dark-mode .leaderboard-entry input{background:#1f1f1f;color:#e5e7eb;border-color:#3a3a3a}
  body.dark-mode .leaderboard-meta{color:#9ca3af}
  body.dark-mode .leaderboard-feedback{color:#9ca3af}
  body.dark-mode .leaderboard-feedback.error{color:#f87171}
  body.dark-mode .leaderboard-feedback.success{color:var(--green)}

  body.dark-mode{background:#1a1a1a;color:#e5e7eb}
  body.dark-mode .wrap{color:#e5e7eb}
  body.dark-mode .section .h{color:#e5e7eb}
  body.dark-mode .tab{background:#2a2a2a;color:#e5e7eb;border-color:#3a3a3a}
  body.dark-mode .sub{background:#2a2a2a}
  body.dark-mode .sub:hover{background:#333}
  body.dark-mode .progress-top{background:#2a2a2a}
  body.dark-mode .progress-left{background:#2a2a2a}
  body.dark-mode .achievement-panel{background:rgba(7,10,20,.92)}
  body.dark-mode .settings-panel{background:#2a2a2a;color:#e5e7eb}
  body.dark-mode .leaderboard-content{background:rgba(7,10,20,.94);color:#e5e7eb}
  body.dark-mode .leaderboard-item{background:rgba(22,28,45,.9);border-color:rgba(74,207,255,.18)}
  body.dark-mode .completion-content{background:rgba(7,10,20,.95);color:#e5e7eb}

  /* TABS */
  .tabs{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:6px 0 32px;
    position:fixed;top:60px;left:0;right:0;background:#fff;padding:12px 20px;
    box-shadow:0 2px 10px rgba(0,0,0,0.1);z-index:999}
  .tab{
    appearance:none;cursor:pointer;border:2px solid #e5e7eb;background:#fff;color:var(--ink);
    padding:10px 18px;border-radius:999px;font-weight:700;transition:all .4s ease;
  }
  .tab:hover{border-color:var(--gold);color:#000;transform:scale(1.03)}
  .tab.clicked{
    background:var(--gold);color:#000;border-color:var(--gold);animation:tabClick .6s ease;
  }
  @keyframes tabClick{
    0%{transform:scale(1);background:var(--gold)}
    50%{transform:scale(1.08);background:var(--gold)}
    100%{transform:scale(1);background:#fff;border-color:var(--gold)}
  }

  /* SECTION HEADERS */
  .section{margin:28px 0}
  .h{
    display:flex;align-items:center;gap:10px;width:100%;text-align:left;
    padding:16px 0;border:none;background:transparent;font-weight:800;font-size:22px;cursor:pointer;
    transition:all .5s ease;
  }
  .h:hover{transform:translateX(10px);color:var(--gold)}
  .h .caret{width:18px;height:18px;display:inline-grid;place-items:center;color:#94a3b8;transition:all .4s ease}
  .h:hover .caret{color:var(--gold);transform:rotate(90deg)}
  .h.centering{
    animation:slideCenter 1.8s ease forwards;
  }
  @keyframes slideCenter{
    0%{transform:translateX(0);color:var(--ink)}
    50%{transform:translateX(calc(50vw - 50%));color:var(--gold);text-shadow:0 0 25px rgba(212,175,55,.8)}
    100%{transform:translateX(calc(50vw - 50%));color:var(--gold);text-shadow:0 0 25px rgba(212,175,55,.8)}
  }

  .panel{display:none;padding:0 0 18px 0}
  .panel.show{display:block;animation:fadeIn .6s ease}
  @keyframes fadeIn{from{opacity:0;transform:translateY(-12px)} to{opacity:1;transform:none}}
  .meta{color:var(--muted);font-style:italic;font-size:14px}

  /* JOB/SCHOOL CARDS */
  .sub{
    margin:20px 0;padding:18px;background:#fafafa;border-radius:8px;
    transition:all .4s ease;
  }
  .sub:hover{background:#f0f0f0;transform:translateX(6px)}
  .sub .sub-h{
    width:100%;text-align:left;background:transparent;border:0;padding:0;cursor:pointer;
    display:flex;align-items:flex-start;gap:10px;font-weight:700;font-size:17px;
  }
  .sub .sub-h .caret{width:14px;height:14px;color:#94a3b8;transition:all .4s ease;margin-top:4px}
  .sub .sub-h:hover .caret{color:var(--gold);transform:rotate(90deg)}
  .job-header{display:flex;justify-content:space-between;flex:1;gap:20px}
  .job-title{display:flex;flex-direction:column;gap:4px}
  .company-name{font-size:18px;color:var(--ink)}
  .position-name{font-size:16px;font-weight:600;color:var(--muted)}
  .job-meta{display:flex;flex-direction:column;gap:4px;text-align:right;align-items:flex-end}
  .sub .sub-p{display:none;margin-top:12px}
  .sub .sub-p.show{display:block}

  /* Staggered list reveal */
  .list{margin:10px 0 6px 20px;padding:0;list-style:disc}
  .list li{opacity:0;transform:translateY(8px);margin:8px 0;transition:all .5s ease}
  .list li.reveal{animation:revealItem .6s ease forwards}
  .list li.hide{animation:hideItem .4s ease forwards}
  @keyframes revealItem{to{opacity:1;transform:none}}
  @keyframes hideItem{from{opacity:1;transform:none} to{opacity:0;transform:translateY(-8px)}}

  /* Metric highlight on hover */
  .metric{font-weight:800;color:var(--ink);transition:all .3s ease}
  .list li:hover .metric{color:var(--gold);text-shadow:0 0 8px rgba(212,175,55,.6)}

  /* Skills grid */
  .skills-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:20px 40px;margin:20px 0}
  .skill-item{
    padding:10px 0;font-weight:500;color:var(--ink);
    transition:all .4s ease;opacity:0;transform:translateY(8px);
  }
  .skill-item.reveal{animation:revealItem .6s ease forwards}
  .skill-item.hide{animation:hideItem .4s ease forwards}
  .skill-item:hover{color:var(--gold);transform:translateX(8px) translateY(0)}

  /* Lists in certs/honors */
  #p-certs .list, #p-honors .list{list-style:none;margin-left:0}
  #p-certs .list li, #p-honors .list li{
    padding:8px 0;transition:all .4s ease;
  }
  #p-certs .list li:hover, #p-honors .list li:hover{color:var(--gold);transform:translateX(8px)}

  /* Two-column layouts */
  #p-certs .list{display:grid;grid-template-columns:repeat(2,1fr);gap:10px 30px}
  #p-honors .list{display:grid;grid-template-columns:repeat(2,1fr);gap:10px 30px}
</style>
</head>
<body>

<!-- TEXT NOTE: Start screen copy lives here for quick edits -->
<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
  <div class="start-content">
    <div class="start-title">QUENTIN STERLING</div>
    <div class="start-subtitle">Interactive Resume Experience</div>
    <button class="play-button" onclick="startGame()">PLAY NOW</button>
    <!-- TEXT NOTE: Secondary actions beneath PLAY NOW -->
    <div class="start-actions">
      <button type="button" class="start-secondary-btn" onclick="openSettingsPanel()">Settings</button>
      <button type="button" class="start-secondary-btn" onclick="openLeaderboardModal()">Leaderboard</button>
    </div>
    <div class="start-encouragement"></div> <!-- TEXT NOTE: tweak motivation line here -->
  </div>
</div>

<!-- HORIZONTAL PROGRESS BAR -->
<div class="progress-top">
  <div class="progress-top-label">Sections Progress:</div>
  <div class="progress-top-bar">
    <div class="progress-top-fill" id="progressTopFill" style="width:0%">
      <div class="progress-top-text"><span id="progressTopPercent">0%</span></div>
    </div>
  </div>
  <div class="progress-top-xp" id="progressTopXP">Sections 0 / 6</div>
</div>

<!-- VERTICAL PROGRESS BAR -->
<div class="progress-left">
  <div class="progress-left-icon">XP</div>
  <div class="progress-left-bar">
    <div class="progress-left-fill" id="progressLeftFill" style="height:0%"></div>
  </div>
  <div class="progress-left-percent" id="progressLeftPercent">0 XP</div>
</div>

<!-- ACHIEVEMENT TRACKER -->
<div class="achievement-panel" id="achievementPanel">
  <div class="achievement-header" onclick="toggleAchievementPanel()">
    <span>üèÜ ACHIEVEMENTS</span>
    <span class="achievement-toggle">‚óÄ</span>
  </div>
  <div class="achievement-body">
    <div class="achievement-counter" id="achievementCounter">0 / 70 Unlocked</div>
    <div id="achievementList"></div>
  </div>
</div>

<!-- SETTINGS BUTTON -->
  <button class="settings-button" id="settingsButton" onclick="toggleSettings()">&#9881;</button>

<!-- SETTINGS PANEL -->
<div class="settings-panel" id="settingsPanel">
  <div class="setting-item">
    <span class="setting-label">Sound</span>
    <div class="toggle-switch" id="soundToggle" onclick="toggleSound()">
      <div class="toggle-slider"></div>
    </div>
  </div>
  <div class="setting-item">
    <span class="setting-label">Dark Mode</span>
    <div class="toggle-switch" id="darkModeToggle" onclick="toggleDarkMode()">
      <div class="toggle-slider"></div>
    </div>
  </div>
</div>

<!-- LEADERBOARD BUTTON -->
  <button class="leaderboard-button" id="leaderboardButton" onclick="toggleLeaderboard()">&#127942;</button>

<!-- LEADERBOARD MODAL -->
<div class="leaderboard-modal" id="leaderboardModal">
  <div class="leaderboard-content">
    <div class="leaderboard-title">Top Scores</div>
    <p class="leaderboard-cta">Can you beat your last score?</p>
    <ul class="leaderboard-list" id="leaderboardList"></ul>
    <div style="text-align:center;margin-top:20px">
      <button class="cta-btn cta-btn-secondary" onclick="toggleLeaderboard()">Close</button>
    </div>
  </div>
</div>

<!-- TEXT NOTE: Completion modal messaging + CTAs -->
<!-- COMPLETION MODAL -->
<div class="completion-modal" id="completionModal">
  <div class="completion-content">
    <div class="completion-title">LEVEL 1 COMPLETE: RESUME MASTERY</div>

    <div class="completion-stats">
      <div class="stat-row">
        <span class="stat-label">?? Experience Points</span>
        <span class="stat-value" id="finalXP">0 XP</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">?? Achievements Unlocked</span>
        <span class="stat-value" id="finalAchievements">0 / 70</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">? Exploration Time</span>
        <span class="stat-value" id="finalTime">0m 0s</span>
      </div>
      <div class="stat-row">
        <span class="stat-label">?? Rank</span>
        <span class="stat-value" id="finalRank">NOVICE</span>
      </div>
    </div>

    <div class="completion-message">
      You've discovered <span id="completionPercent">0%</span> of my professional journey. Some secrets may remain hidden...
    </div>

    <div class="completion-primary">
      <a href="https://www.thesterlingsgroup.com/schedule-a-conversation" target="_blank" class="cta-btn cta-btn-primary">Schedule a Conversation</a>
      <a href="https://www.thesterlingsgroup.com/portfolio" target="_blank" class="cta-btn cta-btn-primary">Explore the Portfolio</a>
      <a href="https://www.linkedin.com/in/qsterling1/" target="_blank" class="cta-btn cta-btn-primary">Connect on LinkedIn</a>
    </div>

    <div class="completion-secondary">
      <a href="QuentinSterling_2025.pdf" download class="cta-btn cta-btn-secondary">Download PDF Resume</a>
    </div>

    <!-- TEXT NOTE: Leaderboard form copy + prompts -->
    <div class="leaderboard-entry">
      <label for="leaderboardNameInput" style="display:block;font-weight:700;margin-bottom:10px;">Add yourself to the leaderboard</label>
      <div class="leaderboard-entry-controls">
        <input type="text" id="leaderboardNameInput" placeholder="Your name or initials" maxlength="40"/>
        <button type="button" class="cta-btn cta-btn-primary" onclick="submitLeaderboardScore()">Submit Score</button>
        <button type="button" class="cta-btn cta-btn-secondary" onclick="removeMyLeaderboardScore()">Remove My Score</button>
      </div>
      <div class="leaderboard-feedback" id="leaderboardFeedback"></div>
    </div>

    <div class="completion-footer">
      <button class="cta-btn cta-btn-ghost" onclick="minimizeCompletionModal()">Back to Resume</button>
      <div class="completion-footer-actions">
        <button type="button" class="cta-btn cta-btn-secondary" onclick="openLeaderboardModal()">View Leaderboard</button>
        <button type="button" class="cta-btn cta-btn-secondary" onclick="playAgain()">Play Again</button>
      </div>
    </div>

    <div class="completion-divider"></div>
    <div class="completion-section-title">Next Levels</div>
    <div class="next-levels">
      <div class="level-item locked">
        <div class="level-number">2</div>
        <div class="level-info">
          <div class="level-name">First Contact</div>
          <div class="level-desc">Reach out for interview or conversation</div>
        </div>
      </div>
      <div class="level-item locked">
        <div class="level-number">3</div>
        <div class="level-info">
          <div class="level-name">Meet Quentin Sterling</div>
          <div class="level-desc">Have an interview or discussion</div>
        </div>
      </div>
      <div class="level-item locked">
        <div class="level-number">4</div>
        <div class="level-info">
          <div class="level-name">Collaboration Begins</div>
          <div class="level-desc">Start working together</div>
        </div>
      </div>
      <div class="level-item locked">
        <div class="level-number">5</div>
        <div class="level-info">
          <div class="level-name">Boss Fight - Project Success</div>
          <div class="level-desc">Complete a successful project together</div>
        </div>
      </div>
      <div class="level-item locked">
        <div class="level-number">?</div>
        <div class="level-info">
          <div class="level-name">Boss Fight - Legendary Testimonial</div>
          <div class="level-desc">Celebrate the win with a glowing review</div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- COMPLETION DOCK (minimized contact panel for post-run access) -->
<div class="completion-dock" id="completionDock">
  <div class="completion-dock-title">Let's keep the momentum going.</div>
  <div class="completion-dock-actions">
    <a href="https://www.thesterlingsgroup.com/schedule-a-conversation" target="_blank">Schedule a Conversation</a>
    <a href="https://www.thesterlingsgroup.com/portfolio" target="_blank">Explore the Portfolio</a>
    <a href="QuentinSterling_2025.pdf" download>Download PDF Resume</a>
    <button type="button" onclick="openLeaderboardModal()">View Leaderboard</button>
    <button type="button" onclick="maximizeCompletionModal()">Expand Celebration</button>
  </div>
</div>

<div class="wrap">

  <!-- TEXT NOTE: Tab labels for resume sections -->
  <!-- centered tabs -->
  <nav class="tabs" aria-label="Sections">
    <button class="tab" data-target="summary">Professional Summary</button>
    <button class="tab" data-target="experience">Experience</button>
    <button class="tab" data-target="education">Education</button>
    <button class="tab" data-target="skills">Skills</button>
    <button class="tab" data-target="certs">Professional Certificates</button>
    <button class="tab" data-target="honors">Honors & Achievements</button>
  </nav>

  <!-- SUMMARY -->
  <section id="summary" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Professional Summary</button>
    <div id="p-summary" class="panel">
      <p>
        Proven leader in launching and scaling global brands and games across the U.S. and Asia. Experienced in go-to-market,
        publishing, and user acquisition with a strong focus on results, cross-cultural execution, and Agile delivery.
      </p>
    </div>
  </section>

  <!-- EXPERIENCE -->
  <section id="experience" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Experience</button>
    <div id="p-experience" class="panel">

      <div class="sub">
        <button class="sub-h" aria-expanded="false">
          <span class="caret">‚ñ∏</span>
          <div class="job-header">
            <div class="job-title">
              <span class="company-name">Sterling Q Consulting</span>
              <span class="position-name">Principal Consultant</span>
            </div>
            <div class="job-meta">
              <span class="meta">Los Angeles, CA / Chongqing, China</span>
              <span class="meta">2018‚ÄìPresent</span>
            </div>
          </div>
        </button>
        <div class="sub-p">
          <ul class="list">
            <li>Implemented systems across operations, marketing, and product development that optimized delivery.</li>
            <li>Streamlined early-stage ideas into launched products by designing scalable and executable frameworks.</li>
            <li>Analyzed, optimized and developed business models that increased revenues by <span class="metric">200%</span>.</li>
            <li>Guided product dev teams from concept to launch with roadmaps, creative strategies and design.</li>
            <li>Managed global projects across industries, keeping cross-functional teams on schedule and ensuring results.</li>
          </ul>
        </div>
      </div>

      <div class="sub">
        <button class="sub-h" aria-expanded="false">
          <span class="caret">‚ñ∏</span>
          <div class="job-header">
            <div class="job-title">
              <span class="company-name">Elex Tech</span>
              <span class="position-name">Brand Manager (Lead Brand Creative)</span>
            </div>
            <div class="job-meta">
              <span class="meta">Beijing, China</span>
              <span class="meta">2020‚Äì2022</span>
            </div>
          </div>
        </button>
        <div class="sub-p">
          <ul class="list">
            <li>Published <em>The Walking Dead: Survivors</em> mobile game; reached <span class="metric">1,000,000 downloads</span> in the first six months.</li>
            <li>Designed social strategy; built <span class="metric">1,000,000+ followers</span>, becoming the largest TWD community online.</li>
            <li>Negotiated platform deals that generated over <span class="metric">1 billion views</span> on TikTok.</li>
            <li>Built ad pipelines and supervised UA launches that improved retention and new installs with <span class="metric">10,000 DAUs</span>.</li>
            <li>Directed content strategy that led to several impactful social media campaigns.</li>
            <li>Achieved <span class="metric">100% UGC increase</span> by turning user research insights into actionable game features and improvements.</li>
          </ul>
        </div>
      </div>

      <div class="sub">
        <button class="sub-h" aria-expanded="false">
          <span class="caret">‚ñ∏</span>
          <div class="job-header">
            <div class="job-title">
              <span class="company-name">Pathea Games</span>
              <span class="position-name">Senior Brand Manager</span>
            </div>
            <div class="job-meta">
              <span class="meta">Chongqing, China</span>
              <span class="meta">2019‚Äì2020</span>
            </div>
          </div>
        </button>
        <div class="sub-p">
          <ul class="list">
            <li>Improved <em>My Time at Portia</em> by <span class="metric">200%</span>, from <span class="metric">650K to 2,000,000+</span> Steam units, and <span class="metric">10,000,000+</span> on all platforms.</li>
            <li>Designed, launched, and managed Kickstarter campaign that reached <span class="metric">$100,000 goal</span> in less than 24 hours.</li>
            <li>Exceeded Kickstarter goal by <span class="metric">400%</span> and achieved a <span class="metric">$534,000 total</span> in under 30 days.</li>
            <li>Received Chinese government Cultural Export Award, elevating studio as China's number one indie developer.</li>
            <li>Negotiated with and managed all platforms, including Nintendo, Xbox, PlayStation, Humble Bundle and more!</li>
            <li>Took the company from emerging indie studio to internationally recognized with commercially successful titles.</li>
          </ul>
        </div>
      </div>

      <div class="sub">
        <button class="sub-h" aria-expanded="false">
          <span class="caret">‚ñ∏</span>
          <div class="job-header">
            <div class="job-title">
              <span class="company-name">Jiang Xiao Bai Brand Management Company</span>
              <span class="position-name">Global Brand Manager</span>
            </div>
            <div class="job-meta">
              <span class="meta">Chongqing, China</span>
              <span class="meta">2017‚Äì2019</span>
            </div>
          </div>
        </button>
        <div class="sub-p">
          <ul class="list">
            <li>Drove growth from no global sales to over <span class="metric">30M CNY</span> in revenue and collaborated with international partners.</li>
            <li>Increased the brand by building its international presence from <span class="metric">0 to 8 countries</span> plus the United States.</li>
            <li>Designed and delivered GTM entry plans that ensured localization and smooth execution worldwide.</li>
          </ul>
        </div>
      </div>

    </div>
  </section>

  <!-- EDUCATION -->
  <section id="education" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Education</button>
    <div id="p-education" class="panel">

      <div class="sub">
        <button class="sub-h" aria-expanded="false"><span class="caret">‚ñ∏</span> Arizona State University</button>
        <div class="sub-p">
          <p><strong>B.S., Graphic Info Tech (Full-Stack Development)</strong> ‚Äî 2024‚ÄìPresent <span class="meta">Tempe, AZ (Online)</span></p>
        </div>
      </div>

      <div class="sub">
        <button class="sub-h" aria-expanded="false"><span class="caret">‚ñ∏</span> Chongqing University</button>
        <div class="sub-p">
          <p><strong>M.A., Master of International Business</strong> ‚Äî 2018 <span class="meta">Chongqing, China</span></p>
        </div>
      </div>

      <div class="sub">
        <button class="sub-h" aria-expanded="false"><span class="caret">‚ñ∏</span> Fairmont State University</button>
        <div class="sub-p">
          <p><strong>B.A., Communications | B.S., Psychology</strong> ‚Äî 2010 <span class="meta">Fairmont, WV</span></p>
        </div>
      </div>

    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Skills</button>
    <div id="p-skills" class="panel">
      <div class="skills-grid">
        <div class="skill-item">AI Prompt Engineering (ChatGPT, Claude, Gemini)</div>
        <div class="skill-item">Project & Team Leadership</div>
        <div class="skill-item">Project Management (Agile - Git, Jira)</div>
        <div class="skill-item">Strategic Planning</div>
        <div class="skill-item">Adobe (PS, XD, PR, AI, ID, Figma)</div>
        <div class="skill-item">Stakeholder Reporting</div>
        <div class="skill-item">C#, Python, HTML (Basic)</div>
        <div class="skill-item">Process Optimization</div>
        <div class="skill-item">Microsoft Excel</div>
        <div class="skill-item">Cross-Functional Teamwork</div>
        <div class="skill-item">Unity (basic)</div>
        <div class="skill-item">Data-Driven Decision-Making</div>
        <div class="skill-item">Unreal Engine (basic)</div>
        <div class="skill-item">Change Management</div>
        <div class="skill-item">Visual Studio Code</div>
        <div class="skill-item">Analytical Reasoning</div>
        <div class="skill-item">Process Documentation & Reporting</div>
        <div class="skill-item">Creative Development</div>
        <div class="skill-item">Mandarin Chinese (Basic Proficiency)</div>
      </div>
    </div>
  </section>

  <!-- CERTIFICATIONS -->
  <section id="certs" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Professional Certificates</button>
    <div id="p-certs" class="panel">
      <ul class="list">
        <li>UX Design ‚Äì Google</li>
        <li>Google Analytics/SEO ‚Äì Google</li>
        <li>Agile PM ‚Äì Atlassian</li>
        <li>Agile Foundations ‚Äì IIBA</li>
        <li>Intro HTML, CSS, & JavaScript ‚Äì IBM</li>
        <li>Intro Software Engineering ‚Äì IBM</li>
        <li>Game Design ‚Äì Cal Arts</li>
        <li>Graphic Design ‚Äì Cal Arts</li>
        <li>Metaliteracy ‚Äì SUNY</li>
        <li>TEFL 120 Hours ‚Äì iTTT</li>
      </ul>
    </div>
  </section>

  <!-- HONORS -->
  <section id="honors" class="section">
    <button class="h" aria-expanded="false"><span class="caret">‚ñ∏</span> Honors & Achievements</button>
    <div id="p-honors" class="panel">
      <ul class="list">
        <li>ASU Deans List 2024</li>
        <li>Jiang Xiao Bai Top Employee 2019</li>
        <li>UMF Man of the Year Southwest China 2018</li>
        <li>Pathea Games Single Day Steam Sales Record</li>
        <li>US Citizen Warden US Consulate Chengdu 2018‚Äìpresent</li>
        <li>William White Athletic Scholarship</li>
        <li>4 Year College Football Letter Winner 3 Year Starter</li>
        <li>Black Heritage Council of Marion OH Award Winner</li>
        <li>Student Psychology Association</li>
        <li>Disaster Committee American Red Cross</li>
        <li>International Student Organization</li>
        <li>Student Athlete Advisory Committee</li>
        <li>Volunteer American Red Cross Boys and Girls Club</li>
        <li>Volunteer Special Olympics</li>
        <li>Volunteer United Way Salvation Army</li>
        <li>Volunteer Columbus Literacy Council</li>
        <li>Volunteer Jinhae Church South Korea</li>
      </ul>
    </div>
  </section>

</div>

<script>
// === GAMIFICATION SYSTEM ===
const GAME = {
  xp: 0,
  maxXP: 500,
  achievements: [],
  sectionsOpened: new Set(),
  sectionIds: ['summary','experience','education','skills','certs','honors'],
  milestoneIds: ['milestone_25','milestone_50','milestone_75','milestone_100'],
  skillCount: 0,
  certCount: 0,
  honorCount: 0,
  metricCount: 0,
  totalAchievements: 0,
  sectionCompletionShown: false,
  currentRunId: null,
  lastSavedScoreId: null,
  leaderboardKey: 'resumeLeaderboard_v2',
  startTime: Date.now(),
  soundEnabled: false,
  audioCtx: null,
  konamiSequence: [],
  nameClickCount: 0,

  // Achievement definitions
  achievementDefs: [ // TEXT NOTE: Update achievement names & hints here
    // Main sections
    {id: 'section_summary', name: 'Read Professional Summary', xp: 10, icon: 'üìÑ', hint: 'Open the summary section'},
    {id: 'section_experience', name: 'Explored Experience', xp: 10, icon: 'üíº', hint: 'Open the experience section'},
    {id: 'section_education', name: 'Checked Education', xp: 10, icon: 'üéì', hint: 'Open the education section'},
    {id: 'section_skills', name: 'Reviewed Skills', xp: 10, icon: '‚ö°', hint: 'Open the skills section'},
    {id: 'section_certs', name: 'Viewed Certificates', xp: 10, icon: 'üìú', hint: 'Open the certificates section'},
    {id: 'section_honors', name: 'Discovered Honors', xp: 10, icon: 'üèÖ', hint: 'Open the honors section'},

    // Jobs
    {id: 'job_sterling', name: 'Sterling Q Deep Dive', xp: 5, icon: 'üîç', hint: 'Expand Sterling Q Consulting'},
    {id: 'job_elex', name: 'Elex Tech Explorer', xp: 5, icon: 'üîç', hint: 'Expand Elex Tech'},
    {id: 'job_pathea', name: 'Pathea Games Investigator', xp: 5, icon: 'üîç', hint: 'Expand Pathea Games'},
    {id: 'job_jiangxiaobai', name: 'Jiang Xiao Bai Researcher', xp: 5, icon: 'üîç', hint: 'Expand Jiang Xiao Bai'},

    // Education
    {id: 'edu_asu', name: 'ASU Scholar', xp: 5, icon: 'üéì', hint: 'Expand Arizona State University'},
    {id: 'edu_chongqing', name: 'Chongqing Graduate', xp: 5, icon: 'üéì', hint: 'Expand Chongqing University'},
    {id: 'edu_fairmont', name: 'Fairmont Alumni', xp: 5, icon: 'üéì', hint: 'Expand Fairmont State University'},

    // Completion bonuses
    {id: 'bonus_all_jobs', name: 'Career Completionist', xp: 15, icon: 'üåü', hint: 'View all 4 work experiences'},
    {id: 'bonus_all_edu', name: 'Academic Achiever', xp: 15, icon: 'üåü', hint: 'View all 3 educational institutions'},
    {id: 'bonus_all_skills', name: 'Skill Collector', xp: 15, icon: 'üåü', hint: 'Hover over all 19 skills'},
    {id: 'bonus_all_certs', name: 'Certification Hunter', xp: 15, icon: 'üåü', hint: 'View all 10 certificates'},
    {id: 'bonus_all_honors', name: 'Honor Roll', xp: 15, icon: 'üåü', hint: 'View all 17 honors'},

    // Individual items (created dynamically)
    // Skills: 19 items x 1 XP = 19 XP
    // Certs: 10 items x 1 XP = 10 XP
    // Honors: 17 items x 1 XP = 17 XP
    // Metrics: ~15 items x 2 XP = 30 XP

    // Easter eggs
    {id: 'secret_konami', name: 'Konami Master', xp: 25, icon: 'üéÆ', hint: 'Try the classic sequence...'},
    {id: 'secret_metrics', name: 'Detail Obsessed', xp: 20, icon: 'üî¨', hint: 'Numbers tell stories - hover over them all'},
    {id: 'secret_name', name: 'Name Recognition', xp: 15, icon: 'üë§', hint: 'My name is important - click it 5 times'},
    {id: 'secret_patient', name: 'Patient Explorer', xp: 20, icon: '‚è±Ô∏è', hint: 'Good things take time (5+ minutes)'},
    {id: 'secret_completionist', name: 'True Completionist', xp: 30, icon: 'üíØ', hint: 'Leave no stone unturned - open everything'},
    {id: 'completed_resume', name: 'Resume Mastery Complete', xp: 0, icon: '*', hint: 'Explore every section to finish the experience'},
  ],

  init() {
    this.resetSession();
    this.cacheDynamicCounts();
    this.restorePreferences();
    this.setupEventListeners();
    this.renderAchievements();
    this.updateUI();
    this.startTimers();
  },

  resetSession() {
    this.xp = 0;
    this.achievements = [];
    this.sectionsOpened = new Set();
    this.konamiSequence = [];
    this.nameClickCount = 0;
    this.sectionCompletionShown = false;
    this.startTime = Date.now();
    this.currentRunId = 'run_' + Date.now() + '_' + Math.floor(Math.random() * 100000);
    localStorage.removeItem('resumeGameProgress');
    localStorage.removeItem('resumeLeaderboard');
  },

  cacheDynamicCounts() {
    this.skillCount = document.querySelectorAll('.skill-item').length;
    this.certCount = document.querySelectorAll('#p-certs .list li').length;
    this.honorCount = document.querySelectorAll('#p-honors .list li').length;
    this.metricCount = document.querySelectorAll('.metric').length;
    const baseXP = this.achievementDefs.reduce((total, ach) => total + (ach.xp || 0), 0);
    const dynamicXP = this.skillCount + this.certCount + this.honorCount + (this.metricCount * 2);
    this.maxXP = baseXP + dynamicXP;
    this.totalAchievements = this.achievementDefs.length + this.skillCount + this.certCount + this.honorCount + this.metricCount + this.milestoneIds.length;
  },

  restorePreferences() {
    const darkMode = localStorage.getItem('resumeDarkMode');
    if (darkMode === 'true') {
      document.body.classList.add('dark-mode');
      const darkToggle = document.getElementById('darkModeToggle');
      if (darkToggle) {
        darkToggle.classList.add('on');
      }
    }

    const soundPref = localStorage.getItem('resumeSound');
    if (soundPref) {
      this.soundEnabled = soundPref === 'on';
      const soundToggle = document.getElementById('soundToggle');
      if (soundToggle) {
        soundToggle.classList.toggle('on', this.soundEnabled);
      }
    }
  },
  markSectionOpened(sectionId) {
    if (!sectionId || !this.sectionIds.includes(sectionId)) return;
    if (!this.sectionsOpened.has(sectionId)) {
      this.sectionsOpened.add(sectionId);
      this.updateUI();
      if (this.sectionsOpened.size === this.sectionIds.length) {
        this.onSectionsComplete();
      }
    }
  },
  getLeaderboard() {
    try {
      return JSON.parse(localStorage.getItem(this.leaderboardKey) || '[]');
    } catch (err) {
      console.warn('Unable to parse leaderboard data', err);
      return [];
    }
  },

  saveLeaderboard(entries) {
    localStorage.setItem(this.leaderboardKey, JSON.stringify(entries.slice(0, 25)));
  },

  submitLeaderboardEntry(name) {
    if (this.lastSavedScoreId === this.currentRunId) {
      return {status: 'duplicate'};
    }

    const cleanName = (name || '').trim() || 'Anonymous';
    const entry = {
      runId: this.currentRunId,
      name: cleanName.slice(0, 40),
      score: this.xp,
      sections: this.sectionsOpened.size,
      timestamp: Date.now()
    };

    const entries = this.getLeaderboard();
    entries.push(entry);
    entries.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      if (b.sections !== a.sections) return b.sections - a.sections;
      return a.timestamp - b.timestamp;
    });
    this.saveLeaderboard(entries);
    this.lastSavedScoreId = entry.runId;
    return {status: 'saved', entry};
  },

  onSectionsComplete() {
    if (this.sectionCompletionShown) return;
    this.sectionCompletionShown = true;
    if (!this.achievements.includes('completed_resume')) {
      this.achievements.push('completed_resume');
    }
    this.showCompletionModal();
  },

  restartRun() {
    this.resetSession();
    this.renderAchievements();
    this.updateUI();
    this.hideCompletionDock();
    const modal = document.getElementById('completionModal');
    if (modal) modal.classList.remove('show');
    const nameInput = document.getElementById('leaderboardNameInput');
    if (nameInput) nameInput.value = '';
    const feedback = document.getElementById('leaderboardFeedback');
    if (feedback) {
      feedback.textContent = '';
      feedback.classList.remove('success', 'error');
    }
    const startScreen = document.getElementById('startScreen');
    if (startScreen) {
      startScreen.classList.remove('hidden');
      const playButton = startScreen.querySelector('.play-button');
      if (playButton) playButton.focus();
    }
  },

  ensureAudioContext() {
    if (this.audioCtx || !(window.AudioContext || window.webkitAudioContext)) return;
    const Ctx = window.AudioContext || window.webkitAudioContext;
    this.audioCtx = new Ctx();
  },

  showAchievementBurst(achievementId, amount) {
    if (amount < 5) return;
    const defs = this.achievementDefs.find(a => a.id === achievementId);
    const title = defs ? defs.name : 'Achievement Unlocked';
    const burst = document.createElement('div');
    burst.className = 'xp-burst';
    const centerX = window.innerWidth / 2;
    const topY = 140;
    burst.style.left = `${centerX - 120}px`;
    burst.style.top = `${topY}px`;
    burst.innerHTML = `<span>${title} +${amount} XP</span>`;
    document.body.appendChild(burst);
    const xpBar = document.getElementById('progressLeftFill');
    if (xpBar) {
      this.createSparkles(xpBar);
    }
    setTimeout(() => burst.remove(), 900);
  },

  showCompletionDock() {
    const dock = document.getElementById('completionDock');
    if (dock) dock.classList.add('show');
  },

  hideCompletionDock() {
    const dock = document.getElementById('completionDock');
    if (dock) dock.classList.remove('show');
  },

  removeLeaderboardEntry() {
    if (!this.lastSavedScoreId) return { status: 'missing' };
    const entries = this.getLeaderboard().filter(entry => entry.runId !== this.lastSavedScoreId);
    this.saveLeaderboard(entries);
    const removedId = this.lastSavedScoreId;
    this.lastSavedScoreId = null;
    return { status: 'removed', runId: removedId };
  },

  addXP(amount, achievementId) {
    if (achievementId && this.achievements.includes(achievementId)) {
      return; // Already unlocked
    }

    if (achievementId) {
      this.achievements.push(achievementId);
      this.showAchievementBurst(achievementId, amount);
    }

    this.xp += amount;
    if (this.xp > this.maxXP) this.xp = this.maxXP;

    this.updateUI();
    this.playSound('xp');

    // Check for 100% completion via XP
    if (this.xp >= this.maxXP && this.sectionsOpened.size === this.sectionIds.length && !this.sectionCompletionShown) {
      setTimeout(() => this.showCompletionModal(), 600);
    }
  },

  updateUI() {
    const sectionPercent = Math.round((this.sectionsOpened.size / this.sectionIds.length) * 100) || 0;
    const xpPercent = Math.round((this.xp / this.maxXP) * 100);
    const sectionsComplete = sectionPercent >= 100;
    const xpComplete = xpPercent >= 100;

    const topFill = document.getElementById('progressTopFill');
    if (topFill) {
      topFill.style.width = sectionPercent + '%';
      topFill.classList.toggle('complete', sectionsComplete);
      const topText = document.getElementById('progressTopPercent');
      if (topText) topText.textContent = sectionPercent + '%';
      const topCount = document.getElementById('progressTopXP');
      if (topCount) topCount.textContent = `Sections ${this.sectionsOpened.size} / ${this.sectionIds.length}`;
    }

    const leftFill = document.getElementById('progressLeftFill');
    if (leftFill) {
      leftFill.style.height = xpPercent + '%';
      leftFill.classList.toggle('complete', xpComplete);
      const leftText = document.getElementById('progressLeftPercent');
      if (leftText) leftText.textContent = `${this.xp} XP (${xpPercent}%)`;
    }

    const totalAchievements = this.totalAchievements || this.achievementDefs.length;
    document.getElementById('achievementCounter').textContent =
      this.achievements.length + ' / ' + totalAchievements + ' Unlocked';

    this.renderAchievements();

    if ([25, 50, 75, 100].includes(xpPercent) && !this.achievements.includes('milestone_' + xpPercent)) {
      this.achievements.push('milestone_' + xpPercent);
      this.createSparkles(leftFill || topFill || document.body);
      this.playSound('milestone');
    }
  },

  showXPFloat(text, x, y) {
    const float = document.createElement('div');
    float.className = 'xp-float';
    float.textContent = text;
    float.style.left = x + 'px';
    float.style.top = y + 'px';
    document.body.appendChild(float);
    setTimeout(() => float.remove(), 1500);
  },

  createSparkles(element) {
    const rect = element.getBoundingClientRect();
    for (let i = 0; i < 12; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      const angle = (Math.PI * 2 * i) / 12;
      const distance = 40 + Math.random() * 20;
      sparkle.style.cssText = `
        left: ${rect.left + rect.width / 2}px;
        top: ${rect.top + rect.height / 2}px;
        --tx: ${Math.cos(angle) * distance}px;
        --ty: ${Math.sin(angle) * distance}px;
      `;
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 800);
    }
  },

  setupEventListeners() {
    // Track sections opened
    const tabs = document.querySelectorAll('.tab');
    const sections = document.querySelectorAll('.section');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const target = tab.dataset.target;
        this.markSectionOpened(target);
        const sectionAchievement = 'section_' + target;
        if (!this.achievements.includes(sectionAchievement)) {
          const rect = tab.getBoundingClientRect();
          this.showXPFloat('+10 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(10, sectionAchievement);
        }
      });
    });

    sections.forEach(section => {
      const header = section.querySelector('.h');
      header.addEventListener('click', () => {
        this.markSectionOpened(section.id);
        const sectionAchievement = 'section_' + section.id;
        if (!this.achievements.includes(sectionAchievement)) {
          const rect = header.getBoundingClientRect();
          this.showXPFloat('+10 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(10, sectionAchievement);
        }
      });
    });

    // Track job/edu expansions
    const jobMapping = {
      'Sterling Q Consulting': 'job_sterling',
      'Elex Tech': 'job_elex',
      'Pathea Games': 'job_pathea',
      'Jiang Xiao Bai': 'job_jiangxiaobai',
      'Arizona State University': 'edu_asu',
      'Chongqing University': 'edu_chongqing',
      'Fairmont State University': 'edu_fairmont'
    };

    document.querySelectorAll('.sub-h').forEach(subH => {
      subH.addEventListener('click', () => {
        const text = subH.textContent;
        for (const [key, id] of Object.entries(jobMapping)) {
          if (text.includes(key) && !this.achievements.includes(id)) {
            const rect = subH.getBoundingClientRect();
            this.showXPFloat('+5 XP', rect.left + rect.width / 2, rect.top);
            this.addXP(5, id);
            break;
          }
        }
      });
    });

    // Track skill hovers
    document.querySelectorAll('.skill-item').forEach((skill, idx) => {
      skill.addEventListener('mouseenter', () => {
        const id = 'skill_' + idx;
        if (!this.achievements.includes(id)) {
          const rect = skill.getBoundingClientRect();
          this.showXPFloat('+1 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(1, id);
        }
      });
    });

    // Track cert/honor hovers
    document.querySelectorAll('#p-certs .list li').forEach((cert, idx) => {
      cert.addEventListener('mouseenter', () => {
        const id = 'cert_' + idx;
        if (!this.achievements.includes(id)) {
          const rect = cert.getBoundingClientRect();
          this.showXPFloat('+1 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(1, id);
        }
      });
    });

    document.querySelectorAll('#p-honors .list li').forEach((honor, idx) => {
      honor.addEventListener('mouseenter', () => {
        const id = 'honor_' + idx;
        if (!this.achievements.includes(id)) {
          const rect = honor.getBoundingClientRect();
          this.showXPFloat('+1 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(1, id);
        }
      });
    });

    // Track metric hovers
    document.querySelectorAll('.metric').forEach((metric, idx) => {
      metric.addEventListener('mouseenter', () => {
        const id = 'metric_' + idx;
        if (!this.achievements.includes(id)) {
          const rect = metric.getBoundingClientRect();
          this.showXPFloat('+2 XP', rect.left + rect.width / 2, rect.top);
          this.addXP(2, id);
        }
      });
    });

    // Easter egg: Name clicks
    document.querySelectorAll('.company-name, .h').forEach(el => {
      el.addEventListener('click', () => {
        if (el.textContent.includes('Sterling')) {
          this.nameClickCount++;
          if (this.nameClickCount >= 5 && !this.achievements.includes('secret_name')) {
            this.showXPFloat('SECRET UNLOCKED: Name Recognition! +15 XP', window.innerWidth / 2, 200);
            this.addXP(15, 'secret_name');
            this.playSound('secret');
          }
        }
      });
    });
  },

  startTimers() {
    // Check for patient explorer achievement
    setInterval(() => {
      const elapsed = Date.now() - this.startTime;
      if (elapsed > 300000 && !this.achievements.includes('secret_patient')) {
        this.showXPFloat('SECRET UNLOCKED: Patient Explorer! +20 XP', window.innerWidth / 2, 200);
        this.addXP(20, 'secret_patient');
        this.playSound('secret');
      }
    }, 60000);
  },

  playSound(type) {
    if (!this.soundEnabled) return;
    this.ensureAudioContext();
    if (!this.audioCtx) return;

    const ctx = this.audioCtx;
    if (ctx.state === 'suspended') {
      ctx.resume();
    }

    const osc = ctx.createOscillator();
    const gain = ctx.createGain();

    const profiles = {
      xp: {frequency: 660, duration: 0.12},
      milestone: {frequency: 880, duration: 0.22},
      secret: {frequency: 990, duration: 0.3},
      complete: {frequency: 523.25, duration: 0.4}
    };

    const profile = profiles[type] || profiles.xp;
    osc.frequency.setValueAtTime(profile.frequency, ctx.currentTime);
    osc.type = type === 'secret' ? 'triangle' : 'sine';

    gain.gain.setValueAtTime(0.001, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.18, ctx.currentTime + 0.01);
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + profile.duration);

    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.start();
    osc.stop(ctx.currentTime + profile.duration);
  },

  renderAchievements() {
    const list = document.getElementById('achievementList');
    list.innerHTML = '';

    this.achievementDefs.forEach(ach => {
      const unlocked = this.achievements.includes(ach.id);
      const div = document.createElement('div');
      div.className = 'achievement-item ' + (unlocked ? 'unlocked' : 'locked');
      div.innerHTML = `
        <div class="achievement-icon">${unlocked ? ach.icon : 'üîí'}</div>
        <div class="achievement-info">
          <div class="achievement-name">${ach.name}</div>
          ${!unlocked ? `<div class="achievement-hint">${ach.hint}</div>` : ''}
        </div>
        <div class="achievement-xp">+${ach.xp} XP</div>
      `;
      list.appendChild(div);
    });
  },

  showCompletionModal() {
    const modal = document.getElementById('completionModal');
    if (!modal) return;

    if (!this.sectionCompletionShown) {
      this.sectionCompletionShown = true;
    }
    if (!this.achievements.includes('completed_resume')) {
      this.achievements.push('completed_resume');
    }

    this.hideCompletionDock();
    this.updateUI();

    const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
    const minutes = Math.floor(elapsed / 60);
    const seconds = elapsed % 60;
    const sectionPercent = Math.round((this.sectionsOpened.size / this.sectionIds.length) * 100) || 0;
    const xpPercent = Math.round((this.xp / this.maxXP) * 100);

    document.getElementById('finalXP').textContent = this.xp + ' / ' + this.maxXP + ' XP';
    document.getElementById('finalAchievements').textContent = this.achievements.length + ' / ' + this.totalAchievements;
    document.getElementById('finalTime').textContent = minutes + 'm ' + seconds + 's';
    document.getElementById('completionPercent').textContent = sectionPercent + '%';

    let rank = 'NOVICE EXPLORER';
    if (xpPercent >= 95) rank = 'LEGENDARY COMPLETIONIST';
    else if (xpPercent >= 85) rank = 'EXPERT INVESTIGATOR';
    else if (xpPercent >= 70) rank = 'SKILLED RESEARCHER';
    else if (xpPercent >= 50) rank = 'DEDICATED VIEWER';
    document.getElementById('finalRank').textContent = rank;

    modal.classList.add('show');
    this.playSound('complete');
    this.createSparkles(modal);
  }
};

// Global functions
function toggleAchievementPanel() {
  document.getElementById('achievementPanel').classList.toggle('collapsed');
}

function toggleSettings() {
  document.getElementById('settingsPanel').classList.toggle('show');
}

function openSettingsPanel() { // TEXT NOTE: used by start screen button
  const panel = document.getElementById('settingsPanel');
  if (!panel.classList.contains('show')) {
    panel.classList.add('show');
  }
  const leaderboardModal = document.getElementById('leaderboardModal');
  if (leaderboardModal) {
    leaderboardModal.classList.remove('show');
  }
}

function toggleSound() {
  GAME.soundEnabled = !GAME.soundEnabled;
  const toggle = document.getElementById('soundToggle');
  toggle.classList.toggle('on', GAME.soundEnabled);
  localStorage.setItem('resumeSound', GAME.soundEnabled ? 'on' : 'off');
  if (GAME.soundEnabled) {
    GAME.ensureAudioContext();
    if (GAME.audioCtx && GAME.audioCtx.state === 'suspended') {
      GAME.audioCtx.resume();
    }
  }
}

function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  const toggle = document.getElementById('darkModeToggle');
  const isDark = document.body.classList.contains('dark-mode');
  toggle.classList.toggle('on', isDark);
  localStorage.setItem('resumeDarkMode', isDark ? 'true' : 'false');
}

function openLeaderboardModal() {
  const modal = document.getElementById('leaderboardModal');
  const settingsPanel = document.getElementById('settingsPanel');
  if (settingsPanel) {
    settingsPanel.classList.remove('show');
  }
  if (!modal.classList.contains('show')) {
    renderLeaderboard();
    modal.classList.add('show');
  }
}

function toggleLeaderboard() {
  const modal = document.getElementById('leaderboardModal');
  if (modal.classList.contains('show')) {
    modal.classList.remove('show');
  } else {
    renderLeaderboard();
    modal.classList.add('show');
  }
}

function renderLeaderboard() {
  const list = document.getElementById('leaderboardList');
  if (!list) return;
  const scores = GAME.getLeaderboard();
  const sorted = [...scores].sort((a, b) => {
    if (b.score !== a.score) return b.score - a.score;
    if ((b.sections || 0) !== (a.sections || 0)) return (b.sections || 0) - (a.sections || 0);
    return (a.timestamp || 0) - (b.timestamp || 0);
  });

  list.innerHTML = '';

  if (!sorted.length) {
    const empty = document.createElement('li');
    empty.style.textAlign = 'center';
    empty.style.padding = '20px';
    empty.style.color = '#888';
    empty.textContent = 'No scores yet. Be the first!';
    list.appendChild(empty);
    return;
  }

  sorted.slice(0, 10).forEach((entry, idx) => {
    const li = document.createElement('li');
    li.className = 'leaderboard-item' + (entry.runId === GAME.lastSavedScoreId ? ' current' : '');

    const rank = document.createElement('span');
    rank.className = 'leaderboard-rank';
    rank.textContent = '#' + (idx + 1);

    const details = document.createElement('div');
    details.className = 'leaderboard-details';

    const name = document.createElement('span');
    name.className = 'leaderboard-name';
    name.textContent = entry.name || 'Anonymous';

    const meta = document.createElement('span');
    meta.className = 'leaderboard-meta';
    const date = entry.timestamp ? new Date(entry.timestamp).toLocaleDateString() : '';
    const metaParts = ['Sections ' + (entry.sections || 0) + ' / ' + GAME.sectionIds.length];
    if (date) metaParts.push(date);
    meta.textContent = metaParts.join(' | ');

    details.appendChild(name);
    details.appendChild(meta);

    const score = document.createElement('span');
    score.className = 'leaderboard-score';
    score.textContent = entry.score + ' XP';

    li.appendChild(rank);
    li.appendChild(details);
    li.appendChild(score);
    list.appendChild(li);
  });
}

function removeMyLeaderboardScore() { // TEXT NOTE: status messages shown under leaderboard form
  const feedback = document.getElementById('leaderboardFeedback');
  if (!feedback) return;
  const outcome = GAME.removeLeaderboardEntry();
  if (outcome.status === 'removed') {
    feedback.textContent = 'Your recent score has been removed.';
    feedback.classList.remove('error');
    feedback.classList.add('success');
  } else {
    feedback.textContent = 'No saved score to remove yet.';
    feedback.classList.remove('success');
    feedback.classList.add('error');
  }
  renderLeaderboard();
}

// TEXT NOTE: adjust leaderboard form responses below
function submitLeaderboardScore() {
  const input = document.getElementById('leaderboardNameInput');
  const feedback = document.getElementById('leaderboardFeedback');
  if (!input || !feedback) return;

  const outcome = GAME.submitLeaderboardEntry(input.value);
  if (outcome.status === 'duplicate') {
    feedback.textContent = 'Score already saved for this run.';
    feedback.classList.add('error');
    feedback.classList.remove('success');
    return;
  }

  input.value = '';
  feedback.textContent = 'Score saved! Open the leaderboard to see your rank.';
  feedback.classList.remove('error');
  feedback.classList.add('success');
  renderLeaderboard();
}

function playAgain() {
  GAME.restartRun();
}

function closeCompletionModal() {
  document.getElementById('completionModal').classList.remove('show');
  GAME.hideCompletionDock();
}

function minimizeCompletionModal() { // TEXT NOTE: called by "Back to Resume" button
  const modal = document.getElementById('completionModal');
  if (modal) modal.classList.remove('show');
  GAME.showCompletionDock();
}

function maximizeCompletionModal() {
  GAME.showCompletionModal();
}

// Initialize existing accordion code
const tabs = [...document.querySelectorAll('.tab')];
const sections = [...document.querySelectorAll('.section')];

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    const targetId = tab.dataset.target;
    const section = document.getElementById(targetId);
    const header = section.querySelector('.h');
    const panel = section.querySelector('.panel');
    const caret = header.querySelector('.caret');

    tab.classList.add('clicked');
    setTimeout(() => tab.classList.remove('clicked'), 600);

    const isOpen = panel.classList.contains('show');
    if (!isOpen) {
      panel.classList.add('show');
      header.setAttribute('aria-expanded', 'true');
      caret.textContent = '‚ñæ';
      header.classList.add('centering');
      setTimeout(() => header.classList.remove('centering'), 1800);
      setTimeout(() => {
        header.scrollIntoView({behavior: 'smooth', block: 'start'});
      }, 100);
      wireSubAccordions(section);
      animateItems(section, true);
    }
  });
});

sections.forEach(section => {
  const header = section.querySelector('.h');
  const panel = section.querySelector('.panel');
  const caret = header.querySelector('.caret');

  header.addEventListener('click', () => {
    const isOpen = panel.classList.contains('show');
    if (isOpen) {
      animateItems(section, false);
      setTimeout(() => {
        panel.classList.remove('show');
        header.setAttribute('aria-expanded', 'false');
        caret.textContent = '‚ñ∏';
      }, 500);
    } else {
      panel.classList.add('show');
      header.setAttribute('aria-expanded', 'true');
      caret.textContent = '‚ñæ';
      header.classList.add('centering');
      setTimeout(() => header.classList.remove('centering'), 1800);
      wireSubAccordions(section);
      animateItems(section, true);
    }
  });
});

function animateItems(section, reveal) {
  const sectionId = section.id;
  if (sectionId === 'skills') {
    const items = section.querySelectorAll('.skill-item');
    items.forEach((item, i) => {
      item.classList.remove('reveal', 'hide');
      setTimeout(() => {
        item.classList.add(reveal ? 'reveal' : 'hide');
      }, i * 80);
    });
  } else if (sectionId === 'certs' || sectionId === 'honors') {
    const items = section.querySelectorAll('.list li');
    items.forEach((item, i) => {
      item.classList.remove('reveal', 'hide');
      setTimeout(() => {
        item.classList.add(reveal ? 'reveal' : 'hide');
      }, i * 80);
    });
  }
}

function wireSubAccordions(scope) {
  scope.querySelectorAll('.sub').forEach(box => {
    const h = box.querySelector('.sub-h');
    if (!h) return;
    if (h.dataset.wired) return;

    const caret = h.querySelector('.caret');
    const p = box.querySelector('.sub-p');
    const list = p.querySelectorAll('.list li, p');

    h.dataset.wired = 'true';

    h.addEventListener('click', () => {
      const on = h.getAttribute('aria-expanded') === 'true';
      if (on) {
        list.forEach((item, i) => {
          item.classList.remove('reveal');
          item.classList.add('hide');
        });
        setTimeout(() => {
          h.setAttribute('aria-expanded', 'false');
          p.classList.remove('show');
          caret.textContent = '‚ñ∏';
        }, 500);
      } else {
        h.setAttribute('aria-expanded', 'true');
        p.classList.add('show');
        caret.textContent = '‚ñæ';
        list.forEach((item, i) => {
          item.classList.remove('hide');
          setTimeout(() => item.classList.add('reveal'), i * 100);
        });
      }
    });
  });
}

// Start game function
function startGame() {
  GAME.resetSession();
  GAME.renderAchievements();
  GAME.updateUI();
  GAME.hideCompletionDock();
  const startScreen = document.getElementById('startScreen');
  if (startScreen) startScreen.classList.add('hidden');
  const completionModal = document.getElementById('completionModal');
  if (completionModal) completionModal.classList.remove('show');
  const leaderboardModal = document.getElementById('leaderboardModal');
  if (leaderboardModal) {
    leaderboardModal.classList.remove('show');
  }
  const settingsPanel = document.getElementById('settingsPanel');
  if (settingsPanel) {
    settingsPanel.classList.remove('show');
  }
  const nameInput = document.getElementById('leaderboardNameInput');
  if (nameInput) nameInput.value = '';
  const feedback = document.getElementById('leaderboardFeedback');
  if (feedback) {
    feedback.textContent = '';
    feedback.classList.remove('success', 'error');
  }
  if (GAME.soundEnabled) {
    GAME.ensureAudioContext();
    if (GAME.audioCtx && GAME.audioCtx.state === 'suspended') {
      GAME.audioCtx.resume();
    }
  }
}

// Initialize game system
document.addEventListener('DOMContentLoaded', () => {
  GAME.init();
});
</script>
</body>
</html>
